<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
<body class="is-preload">
		<div id="page-wrapper">
    <title>ComienDaw – IMC</title>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th, td {
        text-align: left;
        padding: 8px;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #4CAF50;
        color: white;
      }
      input[type=text] {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        box-sizing: border-box;
      }
      input[type=submit] {
        background-color: #4CAF50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        float: right;
      }
      input[type=submit]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <h1>Mi diario alimenticio</h1>
    <form>
      <fieldset>
        <legend>Desayuno</legend>
        <label for="desayuno">Introduce tu desayuno:</label>
        <input type="text" id="desayuno" name="desayuno">
        <input type="submit" value="Guardar" onclick="guardarComida('desayuno')">
      </fieldset>
      <fieldset>
        <legend>Comida</legend>
        <label for="comida">Introduce tu comida:</label>
        <input type="text" id="comida" name="comida">
        <input type="submit" value="Guardar" onclick="guardarComida('comida')">
      </fieldset>
      <fieldset>
        <legend>Cena</legend>
        <label for="cena">Introduce tu cena:</label>
        <input type="text" id="cena" name="cena">
        <input type="submit" value="Guardar" onclick="guardarComida('cena')">
      </fieldset>
    </form>
    <h2>Comidas guardadas</h2>
    <div id="tablaComidas"></div>
    <script>
      // Función para guardar una comida en el localStorage
      function guardarComida(categoria) {
        const comida = document.getElementById(categoria).value;
        if (comida) {
          let comidas = JSON.parse(localStorage.getItem(categoria)) || [];
          comidas.push(comida);
          localStorage.setItem(categoria, JSON.stringify(comidas));
          document.getElementById(categoria).value = '';
          mostrarComidas();
        }
      }

      // Función para mostrar las comidas guardadas en una tabla
      function mostrarComidas() {
        const desayuno = JSON.parse(localStorage.getItem('desayuno')) || [];
        const comida = JSON.parse(localStorage.getItem('comida')) || [];
        const cena = JSON.parse(localStorage.getItem('cena')) || [];

        let tablaHtml = '<table><tr><th>Desayuno</th><th>Comida</th><th>Cena</th><th></th><th></th></tr>';
        for (let i = 0; i < Math.max(desayuno.length, comida.length, cena.length); i++) {
          const desayunoHtml = i < desayuno.length        ? `<td>${desayuno[i]}</td>` : '<td></td>';
      const comidaHtml = i < comida.length
        ? `<td>${comida[i]}</td>` : '<td></td>';
      const cenaHtml = i < cena.length
        ? `<td>${cena[i]}</td>` : '<td></td>';
      const editarHtml = i < desayuno.length || i < comida.length || i < cena.length
        ? `<td><button onclick="editarComida(${i})">Editar</button></td>` : '<td></td>';
      const borrarHtml = i < desayuno.length || i < comida.length || i < cena.length
        ? `<td><button onclick="borrarComida(${i})">Borrar</button></td>` : '<td></td>';
      tablaHtml += `<tr>${desayunoHtml}${comidaHtml}${cenaHtml}${editarHtml}${borrarHtml}</tr>`;
    }
    tablaHtml += '</table>';
    document.getElementById('tablaComidas').innerHTML = tablaHtml;
  }

  // Función para editar una comida en el localStorage
  function editarComida(index) {
    const desayuno = JSON.parse(localStorage.getItem('desayuno')) || [];
    const comida = JSON.parse(localStorage.getItem('comida')) || [];
    const cena = JSON.parse(localStorage.getItem('cena')) || [];

    const nuevaComida = prompt('Introduce la nueva comida:');
    if (nuevaComida) {
      if (index < desayuno.length) {
        desayuno[index] = nuevaComida;
        localStorage.setItem('desayuno', JSON.stringify(desayuno));
      } else if (index < desayuno.length + comida.length) {
        comida[index - desayuno.length] = nuevaComida;
        localStorage.setItem('comida', JSON.stringify(comida));
      } else {
        cena[index - desayuno.length - comida.length] = nuevaComida;
        localStorage.setItem('cena', JSON.stringify(cena));
      }
      mostrarComidas();
    }
  }

  // Función para borrar una comida del localStorage
  function borrarComida(index) {
    const desayuno = JSON.parse(localStorage.getItem('desayuno')) || [];
    const comida = JSON.parse(localStorage.getItem('comida')) || [];
    const cena = JSON.parse(localStorage.getItem('cena')) || [];

    if (index < desayuno.length) {
      desayuno.splice(index, 1);
      localStorage.setItem('desayuno', JSON.stringify(desayuno));
    } else if (index < desayuno.length + comida.length) {
      comida.splice(index - desayuno.length, 1);
      localStorage.setItem('comida', JSON.stringify(comida));
    } else {
      cena.splice(index - desayuno.length - comida.length, 1);
      localStorage.setItem('cena', JSON.stringify(cena));
    }
    mostrarComidas();
  }

  mostrarComidas(); // Mostrar las comidas guardadas al cargar la página
</script>
</body>
</html>
